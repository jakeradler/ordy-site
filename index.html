<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ordy</title>
    <link rel="stylesheet" href="./style.css" />
    <style>
      h1 {
        text-align: center;
      }
      h2 {
        text-align: center;
      }
      p {
        text-align: center;
      }
      div {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <!-- partial:index.partial.html -->
    <html>
      <head>
        <title>Ordy</title>
      </head>
      <body>
        <div id="root"></div>
        <h1>Smarter Crypto Investing.</h1>
        <canvas
          id="gradient-canvas"
          data-js-darken-top
          data-transition-in
        ></canvas>
        <img
          src="outline2.png"
          alt="Outline-Ordy"
          width="500"
          height="600"
          class="image-1"
        />
        <h2>Â© 2021 Ordcoin Inc. All Rights Reserved.</h2>
        <a
          href="https://twitter.com/meetordy"
          target="_blank"
          class="twitter-link w-inline-block"
          ><img
            src="/Twitter.svg"
            loading="lazy"
            width="47"
            alt="Twitter Icon"
            class="image-2"
        /></a>
        <div className="mt-8 lg:w-2/5 sm:mx-auto sm:text-center md:text-left md:mx-0">
          <p className="text-base font-medium text-gray-900">
            {waitlistData ? (
              <>
                <span className="mr-1">:tada:</span> Thank you! Share your referral link
                to get moved up 10 spots.
              </>
            ) : (
              <>You found us early. Get notified as soon as it's out.</>
            )}
          </p>
          <div className="w-full">
            <div className="mx-auto">
              <Confetti active={!!waitlistData} config={confettiConfig} />
            </div>
          </div>
          {waitlistData ? (
            <div className="mt-3 ">
              <h3 className="text-lg leading-6 font-medium text-gray-900">
                {waitlistData.referral_link}
              </h3>
              <dl className="mt-5 grid grid-cols-1 gap-5 sm:grid-cols-2">
                <div className="px-4 py-5 bg-white shadow rounded-lg overflow-hidden sm:p-6">
                  <dt className="text-sm font-medium text-gray-500 truncate">
                    Current Position
                  </dt>
                  <dd className="mt-1 text-3xl font-semibold text-gray-900">
                    {waitlistData.current_priority} / {waitlistData.total_users}
                  </dd>
                </div>
                <div className="px-4 py-5 bg-white shadow rounded-lg overflow-hidden sm:p-6">
                  <dt className="text-sm font-medium text-gray-500 truncate">
                    Successful Referrals
                  </dt>
                  <dd className="mt-1 text-3xl font-semibold text-gray-900">
                    {waitlistData.total_referrals}
                  </dd>
                </div>
              </dl>
            </div>
          ) : (
            <form
              onSubmit={(evt) => {
                evt.preventDefault();
                if (!email.length) return;
                fetch(/api/waitlist, {
                  method: POST,
                  body: JSON.stringify({
                    email,
                    referralLink: `${
                      process.env.NODE_ENV === "development"
                        ? "http://localhost:3000"
                        : "https://vivid.so"
                    }${router.asPath}`,
                  }),
                  headers: { "Content-Type": "application/json" },
                })
                  .then((res) => res.json())
                  .then((json: WaitlistSubmitResponse) => {
                    setWaitlistData(json);
                  });
              }}
              action="#"
              method="POST"
              className="mt-3 sm:flex"
            >
              <label htmlFor="email" className="sr-only">
                Email
              </label>
              <input
                type="text"
                name="email"
                id="email"
                className="block w-full py-3 text-base rounded-md placeholder-gray-500 shadow-md focus:ring-green-500 focus:border-green-500 sm:flex-1 border-gray-300"
                placeholder="Enter your email"
                onChange={(evt) => setEmail(evt.target.value)}
                value={email}
              />
              <button
                type="submit"
                className="mt-3 w-full px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-gray-800 shadow-md hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:mt-0 sm:ml-3 sm:flex-shrink-0 sm:inline-flex sm:items-center sm:w-auto"
              >
                Request access
                <span className="absolute flex h-3 w-3">
                  <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                </span>
              </button>
            </form>
          )}
        </div>
      );
      </body>
    </html>
    <!-- partial -->
    <script src="./script.js"></script>
  </body>
</html>